{%extends 'base.html' %}
{% load static %}

{% block title %}Today{% endblock %}

{% block content %}
  <div class="date_container">
    <h1>Today</h1>

    <h1 class="date">03.02 TUE</h1>
  </div>

  {{ form.non_field_errors }}
  {% for field in form %}
    {% if field.errors %}
      <p>{{ field.label }} has the following errors:</p>
      <ul>
      {% for error in field.errors %}
        <li>{{ error }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endfor %}

  <div class="container">
    {% for item in today_context %}

      <div class="bujo_entry">
        <div class="bujo_entry_details_container">
          <div class="entry_title"><p>{{ item.chosen_item_type }}</p></div>
          <div class="entry_details"><p>{{ item.item_details }}</p></div>
          <div class="entry_button"><a href="{% url 'edit_today_item' item.pk %}"><button type="button">Edit</button></a></div>
          <div class="entry_button"><a href="{% url 'delete_today_item' item.pk %}"><button type="button">Delete</button></a></div>

          {% if item.chosen_item_type == "Task" %}
            <div class="entry_button">
              <a href="{% url 'done_today_task' item.pk %}">
                <button type="button">Mark as Done</button>
              </a>
            </div>
          {% else %}
          <div class="entry_button"></div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  {% if form %}
    <div class="form_container" id="key_submit">
      <form id="add_key_form" action="#" method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="Add Item" name="Add Item">
      </form>
    </div>
  {% else %}
    <div class="form_container" id="key_submit">
      <form id="add_key_form" action="#" method="get">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="Add Item" name="Add Item">
      </form>
    </div>
  {% endif %}
{% endblock %}
